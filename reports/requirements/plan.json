[
  {
    "id": "2-8",
    "title": "일정 수 이상 블록 생성/라인 삭제 시 낙하 속도 증가",
    "acceptanceCriteria": "누적 블록 생성 수 또는 삭제된 줄 수가 임계치를 넘으면 중력 속도가 단계적으로 빨라지고, HUD에 현재 속도/레벨이 표시된다. 게임 재시작 시 상태가 초기화된다.",
    "impactedLayers": [
      "Domain",
      "Application",
      "Controller",
      "View"
    ],
    "design": {
      "Domain": "`GameModel`이 누적 카운터와 임계치 테이블을 추적하며 `ClockPort`를 통해 중력 레벨을 업데이트한다.",
      "Application": "`GameplayProgressService`가 설정에서 임계치를 읽어 도메인에 전달하고, 상태 변화 이벤트를 뷰 모델에 브로드캐스트한다.",
      "Controller": "게임 시작 시 임계치를 초기화하고, 속도 변화 이벤트를 HUD 업데이트로 연결한다.",
      "View": "`ScorePanel`이 현재 속도/레벨을 추가로 렌더링한다."
    },
    "tests": {
      "단위": "`GameModel`이 임계치 도달 시 `ClockPort#setLevel` 호출 여부 검증.",
      "통합": "시뮬레이션 테스트에서 일정 횟수 라인 삭제 후 HUD 표시가 갱신되는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 누적 카운터와 임계치 로직 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/model/GameClock.java` – 포트 인터페이스 추출 및 레벨 제어 API 확장.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/ScorePanel.java` – 속도/레벨 UI 표시."
    ],
    "resolved": "O"
  },
  {
    "id": "2-21",
    "title": "난이도별 블록 확률 검증 테스트",
    "acceptanceCriteria": "Easy/Normal/Hard 각각에서 I 블록 출현 확률이 요구사항(기본 대비 ±20%)에 부합함을 단위 테스트로 통계적으로 검증한다.",
    "impactedLayers": [
      "Domain",
      "Test"
    ],
    "design": {
      "Domain": "`RandomBlockGenerator`가 테스트 친화적인 난수 시드/샘플 횟수 설정 API를 제공하거나 `BlockSampler` 포트를 노출한다.",
      "Test": "대량 샘플링(예: 100k회) 후 허용 오차(±2%) 내에 확률이 들어오는지 AssertJ로 검증한다."
    },
    "tests": {
      "단위": "Easy/Hard 난이도에서 I 블록 비율이 Normal 대비 ±20%인지 확인하는 통계 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/RandomBlockGenerator.java` – 테스트 전용 시드/샘플 API 또는 포트 추가.",
      "`se-tetris-team6/app/src/test/java/tetris/domain/RandomBlockGeneratorProbabilityTest.java` – 난이도별 확률 검증 테스트 신설."
    ],
    "resolved": "O"
  },
  {
    "id": "BUG-HardDropLock",
    "title": "하드드랍 직후 즉시 잠금 보장",
    "acceptanceCriteria": "플레이어가 하드드랍을 사용하면 해당 블록은 즉시 보드에 고정되고, 다음 틱까지 이동하거나 회전하지 못한다. 이어지는 블록 스폰은 잠금 이벤트 이후에만 이루어진다.",
    "impactedLayers": [
      "Domain",
      "Controller"
    ],
    "design": {
      "Domain": "`GameplayEngine`/`GameModel`이 하드드랍 명령 시 즉시 `lockActiveBlock()`을 호출하고, 후속 입력을 무시하도록 상태 플래그를 도입한다.",
      "Controller": "하드드랍 입력 처리 후 추가 이동 명령을 발행하지 않고, GameModel에서 잠금 완료 콜백을 받을 때까지 입력을 무시한다."
    },
    "tests": {
      "단위": "`GameModel` 시뮬레이션에서 하드드랍 후 `onBlockLocked`가 같은 틱에 호출되는지 검증.",
      "통합": "컨트롤러 입력 시퀀스 테스트로 하드드랍 직후 이동 키가 무시되는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/engine/GameplayEngine.java` – 하드드랍 명령이 즉시 잠금을 수행하도록 수정.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 하드드랍 상태 플래그 및 입력 무시 로직 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/controller/GameController.java` – 하드드랍 처리 후 추가 이동 호출을 방지하는 가드 추가."
    ],
    "resolved": "O"
  },
  {
    "id": "2-24",
    "title": "색각 보정 모드",
    "acceptanceCriteria": "설정에서 색맹 모드를 선택하면 적녹·청황 색각 이상 사용자도 블록 구분이 가능한 팔레트/패턴이 적용된다.",
    "impactedLayers": [
      "Domain",
      "Controller",
      "View"
    ],
    "design": {
      "Domain": "`Setting`에 `ColorVisionMode` 값을 추가하고 저장/불러오기 지원.",
      "Controller": "모드 변경을 뷰 모델에 반영하고 런타임 토글 시 게임 화면 리렌더 요청.",
      "View": "`GamePanel`, `NextBlockPanel`이 모드별 팔레트/패턴을 적용한다."
    },
    "tests": {
      "단위": "`SettingService`가 모드를 올바르게 저장/로드하는지 확인.",
      "UI 스냅샷": "팔레트 배열이 모드에 따라 변경되는지 렌더링 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/setting/Setting.java` – `ColorVisionMode` 열거형과 프로퍼티 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/controller/SettingController.java` – 모드 선택 핸들링.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/GamePanel.java` – 팔레트/패턴 분기 렌더링."
    ],
    "resolved": "O"
  },
  {
    "id": "2-28",
    "title": "추가 가산·감산 점수 규칙",
    "acceptanceCriteria": "T-Spin, 콤보, 백투백 등 조건 충족 시 점수가 가산/감산되고, Score 화면에 규칙이 명시된다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`ScoreRuleEngine`에 `ScoreModifier` 전략을 등록하고 `GameModel`이 조건 이벤트를 전달한다.",
      "View": "`ScorePanel`/`ScoreView`에 활성 보너스 목록과 마지막 가산·감산 이유를 표시한다."
    },
    "tests": {
      "단위": "`ScoreRuleEngine`이 새 규칙에 맞는 점수를 반환하는지 확인.",
      "통합": "게임 플레이 시나리오에서 점수 변화가 기준과 일치하는지 검증."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/model/ScoreRuleEngine.java` – 보너스/패널티 전략 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 조건 충족 시 엔진 호출 로직 보강.",
      "`se-tetris-team6/app/src/main/java/tetris/view/ScoreView.java` – 보너스 UI 표시."
    ],
    "resolved": "O"
  },
  {
    "id": "3-6",
    "title": "이름 입력 후 스코어보드 하이라이트",
    "acceptanceCriteria": "이름 입력 완료 시 스코어보드가 즉시 갱신되고 새 기록이 강조 표시된다.",
    "impactedLayers": [
      "Domain",
      "Controller",
      "View"
    ],
    "design": {
      "Domain": "`LeaderboardService`가 기록 저장 후 최신 순위와 하이라이트 인덱스를 반환.",
      "Controller": "이름 입력 완료 이벤트를 수신해 강조 인덱스를 뷰 모델에 전달.",
      "View": "`ScoreboardPanel`이 강조 행과 애니메이션을 렌더링."
    },
    "tests": {
      "단위": "`LeaderboardService#submitScore`가 정렬 리스트+하이라이트 정보를 반환하는지 확인.",
      "UI": "Scoreboard 렌더 테스트에서 강조 행이 표시되는지 검증."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/leaderboard/LeaderboardRepository.java` 및 구현 – 강조 정보 반환.",
      "`se-tetris-team6/app/src/main/java/tetris/controller/GameOverController.java` – 이름 입력 완료 시 뷰 모델 갱신.",
      "`se-tetris-team6/app/src/main/java/tetris/view/ScoreboardPanel.java` – 강조 렌더링."
    ],
    "resolved": "O"
  },
  {
    "id": "4-2",
    "title": "키 바인딩 설정",
    "acceptanceCriteria": "사용자가 설정 화면에서 키를 재매핑하고, 변경 사항이 저장되며 재시작 후에도 유지된다.",
    "impactedLayers": [
      "Domain",
      "Application",
      "Controller",
      "View"
    ],
    "design": {
      "Domain": "`Setting`이 키 바인딩 맵을 값 객체로 보유.",
      "Application": "`KeyBindingService`가 충돌 검증 후 저장.",
      "Controller": "`SettingController`가 UI 이벤트를 서비스 호출로 변환.",
      "View": "`SettingPanel`이 키 캡처 다이얼로그와 목록 UI 제공."
    },
    "tests": {
      "단위": "`KeyBindingService` 충돌 검증 로직 테스트.",
      "통합": "저장 후 재로딩 시 동일한 키맵이 적용되는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/setting/Setting.java` – 키맵 모델 확장.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/setting/SettingService.java` – 검증/저장 API 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/view/SettingPanel.java` – 리매핑 UI 구현."
    ],
    "resolved": "X"
  },
  {
    "id": "4-3",
    "title": "스코어보드 초기화 기능",
    "acceptanceCriteria": "설정 또는 스코어보드 화면에서 초기화 버튼을 누르면 사용자 확인 후 기록이 모두 삭제된다.",
    "impactedLayers": [
      "Application",
      "Controller",
      "View"
    ],
    "design": {
      "Application": "`LeaderboardService`에 reset 유스케이스 추가.",
      "Controller": "Score/Setting 컨트롤러가 확인 다이얼로그 후 reset 호출.",
      "View": "버튼과 경고 다이얼로그 제공."
    },
    "tests": {
      "단위": "`LeaderboardService#reset`가 저장소를 비우는지 검증.",
      "통합": "UI 흐름 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/leaderboard/LeaderboardRepository.java` – reset 메서드 정의.",
      "`se-tetris-team6/app/src/main/java/tetris/controller/ScoreController.java` – 초기화 핸들러 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/view/ScoreboardPanel.java` – 버튼/다이얼로그 구현."
    ],
    "resolved": "O"
  },
  {
    "id": "5-2",
    "title": "다음 블록 패널의 아이템 표시",
    "acceptanceCriteria": "다음 블록 미리보기에서 아이템 종류와 효과를 시각적으로 표시한다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`BlockGenerator`가 아이템 여부 및 메타데이터를 포함한 DTO를 제공.",
      "View": "`NextBlockPanel`이 아이콘/라벨을 렌더링."
    },
    "tests": {
      "단위": "`RandomBlockGenerator`가 아이템 플래그를 세팅하는지 확인.",
      "UI": "NextBlockPanel 렌더 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/BlockGenerator.java` – `BlockPreview` DTO 반환.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 아이템 메타데이터 추적 및 공개.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/NextBlockPanel.java` – DTO 기반 렌더링."
    ],
    "resolved": "X"
  },
  {
    "id": "5-4",
    "title": "줄 삭제(L) 아이템 존재",
    "acceptanceCriteria": "‘L’ 라벨이 붙은 아이템 블록이 등장하고 설명서에도 나타난다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`LineClearBehavior`를 완성하고 아이템 팩토리에 등록.",
      "View": "아이템 블록에 ‘L’ 라벨을 강조 표기."
    },
    "tests": {
      "단위": "`LineClearBehavior`가 대상 줄 목록을 반환하는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/LineClearBehavior.java` – 동작 로직 구현.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/GamePanel.java` – 라벨 렌더링."
    ],
    "resolved": "X"
  },
  {
    "id": "5-5",
    "title": "L 아이템 잠금 시 줄 삭제",
    "acceptanceCriteria": "L 아이템이 잠기면 L이 위치한 모든 줄이 즉시 제거되고 이펙트가 표시된다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`ItemBlockModel` 또는 `LineClearBehavior`에서 잠금 이벤트 시 보드 줄 삭제.",
      "View": "해당 줄에 플래시/파티클 효과."
    },
    "tests": {
      "단위": "아이템 잠금 시 보드 상태 변화 테스트.",
      "통합": "`GameModel` 시뮬레이션으로 검증."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/model/ItemBlockModel.java` – 잠금 훅 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – LineClear 처리 확장.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/GamePanel.java` – 삭제 이펙트."
    ],
    "resolved": "X"
  },
  {
    "id": "5-6",
    "title": "L 라벨 랜덤 위치",
    "acceptanceCriteria": "L 표시는 블록 내 4칸 중 무작위 좌표에 배치된다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`LineClearBehavior` 또는 아이템 팩토리에서 라벨 좌표를 난수로 선택.",
      "View": "전달받은 좌표에 맞춰 라벨을 렌더링."
    },
    "tests": {
      "단위": "좌표 난수 분포 검증."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/LineClearBehavior.java` – 라벨 좌표 속성 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/GamePanel.java` – 커스텀 좌표 렌더."
    ],
    "resolved": "X"
  },
  {
    "id": "5-7",
    "title": "L 아이템 삭제 점수 반영",
    "acceptanceCriteria": "L 아이템으로 삭제된 줄도 기존 규칙대로 점수/콤보가 계산된다.",
    "impactedLayers": [
      "Domain"
    ],
    "design": {},
    "tests": {
      "단위": "아이템 삭제 이벤트가 점수 변화에 반영되는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 아이템 삭제 시 점수 엔진 호출 정합성 확보.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/model/ScoreRuleEngine.java` – 아이템 이벤트 파라미터 수용."
    ],
    "resolved": "X"
  },
  {
    "id": "5-8",
    "title": "4칸 폭 무게추 아이템",
    "acceptanceCriteria": "4칸 폭의 Weight 아이템이 등장하고 HUD에 설명이 노출된다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`WeightBehavior` 구현을 보강하고 스폰 시 특정 모양을 사용.",
      "View": "전용 색상/아이콘 제공."
    },
    "tests": {
      "단위": "`WeightBehavior`가 4칸 범위로 동작하는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/WeightBehavior.java` – 파라미터화 및 메타데이터 노출.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 스폰 확률 조정.",
      "`se-tetris-team6/app/src/main/java/tetris/view/GameComponent/GamePanel.java` – 시각화 강화."
    ],
    "resolved": "X"
  },
  {
    "id": "5-9",
    "title": "무게추 낙하 경로 삭제",
    "acceptanceCriteria": "Weight 아이템이 떨어지며 지나치는 모든 블록을 제거한다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`WeightBehavior`가 낙하 중 매 tick마다 열을 청소하고, `Board`에 경로 삭제 API를 추가.",
      "View": "낙하 경로 하이라이트/이펙트."
    },
    "tests": {
      "단위": "Weight 아이템 시뮬레이션 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/WeightBehavior.java` – 경로 삭제 로직 구현.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/Board.java` – 열 삭제 API 추가."
    ],
    "resolved": "X"
  },
  {
    "id": "5-11",
    "title": "커스텀 아이템 1 (예: 시간 역행)",
    "acceptanceCriteria": "새 아이템이 스폰·발동·종료까지 정의된 규칙대로 동작한다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`RewindBehavior` 등 신규 `ItemBehavior` 구현 후 매니저에 등록.",
      "View": "HUD에 활성 버프 상태를 표시."
    },
    "tests": {
      "단위": "Behavior가 예상 상태 변화를 일으키는지 확인."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/RewindBehavior.java` – 신규 클래스 추가.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 팩토리 등록 및 상태 반영."
    ],
    "resolved": "X"
  },
  {
    "id": "5-13",
    "title": "커스텀 아이템 2 (예: 랜덤 홀드)",
    "acceptanceCriteria": "두 번째 커스텀 아이템이 명세대로 동작하며 홀드 슬롯을 조작한다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`RandomHoldBehavior` 구현, LineClear 이벤트와 연동.",
      "View": "아이템 HUD 업데이트."
    },
    "tests": {
      "단위": "홀드 슬롯 변경 로직 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/RandomHoldBehavior.java` – 신규 구현.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 팩토리/버프 표시."
    ],
    "resolved": "X"
  },
  {
    "id": "5-15",
    "title": "커스텀 아이템 3 (예: 필드 클린즈)",
    "acceptanceCriteria": "세 번째 아이템이 필드 정화 효과와 쿨다운을 가진다.",
    "impactedLayers": [
      "Domain",
      "View"
    ],
    "design": {
      "Domain": "`FieldCleanseBehavior` 구현, 쿨다운/파티클 메시지 처리.",
      "View": "발동 시 보드 하이라이트."
    },
    "tests": {
      "단위": "Behavior 효과 테스트."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/main/java/tetris/domain/item/behavior/FieldCleanseBehavior.java` – 신규 클래스.",
      "`se-tetris-team6/app/src/main/java/tetris/domain/GameModel.java` – 팩토리/쿨다운 추적."
    ],
    "resolved": "X"
  },
  {
    "id": "6-10",
    "title": "비기능 요구 자동 테스트",
    "acceptanceCriteria": "빌드 시 성능/프레임률/설정 저장 등 비기능 요구를 검증하는 자동 테스트가 최소 1개 이상 실행된다.",
    "impactedLayers": [
      "Test",
      "Domain",
      "Infrastructure"
    ],
    "design": {
      "Domain": "GameClock 등 계측 포인트를 포트 인터페이스로 노출.",
      "Infrastructure": "시간/입력 포트 모킹 유틸 제공.",
      "Test": "JUnit 기반으로 장시간 시뮬레이션 후 지연/처리량을 검증."
    },
    "tests": {
      "단위": "포트 모킹으로 성능 경계 테스트.",
      "통합": "`GameModel` 시뮬레이션이 목표 FPS/지연을 유지하는지 측정."
    },
    "patchPlan": [
      "`se-tetris-team6/app/src/test/java/tetris/nonfunctional/GamePerformanceTest.java` – NFR 테스트 추가.",
      "`se-tetris-team6/app/build.gradle.kts` – 테스트 태스크와 CI 보고서에 포함."
    ],
    "resolved": "X"
  }
]